(window.webpackJsonp=window.webpackJsonp||[]).push([[0,2,10],{100:function(e,t,a){"use strict";a.r(t);var n=a(176);t.default=n.default},176:function(e,t,a){"use strict";a.r(t);var n=a(20),s=a(2),r=a.n(s),i=a(12),o=a(13),l=a(14),h=a(17),c=a(15),u=a(7),d=a(16),p=a(0),m=a.n(p),f=a(23),b=a(322),g=a(321),C=a(24),U=a(83),v=(a(323),a(19)),E=a(71),R=a(126),w=a(127),y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(h.a)(this,Object(c.a)(t).call(this,e))).state={displayName:e.user.displayName||"",email:e.user.email||"",photoURL:e.user.photoURL||"",role:e.user.role||v.b.REGULAR,settings:e.user.settings||v.a},a.photoFileToUpload=null,a.handlePhotoChange=a.handlePhotoChange.bind(Object(u.a)(a)),a.handleRoleChange=a.handleRoleChange.bind(Object(u.a)(a)),a.handleSettingsChange=a.handleSettingsChange.bind(Object(u.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(u.a)(a)),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){e.user!==this.props.user&&this.setState({displayName:this.props.user.displayName||"",email:this.props.user.email||"",photoURL:this.props.user.photoURL||"",role:this.props.user.role||"",settings:this.props.user.settings||v.a})}},{key:"handleUserChanged",value:function(){this.props.onChange(Object(n.a)({},this.state,{photoFileToUpload:this.photoFileToUpload}))}},{key:"handleInputChange",value:function(e){this.setState(Object(U.a)({},e.target.name,e.target.value),this.handleUserChanged)}},{key:"getRoleOptions",value:function(){switch(this.props.currentDbUser.role){case v.b.ADMIN:return[v.b.REGULAR,v.b.USER_MANAGER,v.b.ADMIN];case v.b.USER_MANAGER:default:return[v.b.REGULAR,v.b.USER_MANAGER]}}},{key:"handlePhotoChange",value:function(e){this.photoFileToUpload=e,this.handleUserChanged()}},{key:"handleRoleChange",value:function(e){var t=e.target.value;this.setState({role:t},this.handleUserChanged)}},{key:"handleSettingsChange",value:function(e){this.setState({settings:e},this.handleUserChanged)}},{key:"render",value:function(){var e={value:this.state.displayName,name:"displayName",onChange:this.handleInputChange},t={value:this.state.email,name:"email",onChange:this.handleInputChange};return m.a.createElement("div",{className:"user-view"},m.a.createElement(w.a,{photoURL:this.state.photoURL,onChange:this.handlePhotoChange}),m.a.createElement(E.a,{label:"Name",inputProps:e}),m.a.createElement(E.a,{label:"Email",inputProps:t}),m.a.createElement("div",{className:"role-wrapper"},m.a.createElement("label",null,"Role"),m.a.createElement("select",{onChange:this.handleRoleChange,value:this.state.role},this.getRoleOptions().map(function(e,t){return m.a.createElement("option",{key:t},e)}))),m.a.createElement(R.a,{settings:this.state.settings,onChange:this.handleSettingsChange}))}}]),t}(m.a.Component),N=a(98),O=a(46);var k=a(43),j=(a(311),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(h.a)(this,Object(c.a)(t).call(this,e))).state={newUser:null},a.handleConfirm=a.handleConfirm.bind(Object(u.a)(a)),a.handleUserChange=a.handleUserChange.bind(Object(u.a)(a)),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleConfirm",value:function(){var e=Object(i.a)(r.a.mark(function e(){var t,a,n,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.params.user.id){e.next=4;break}this.props.editUser(),e.next=16;break;case 4:if(t={displayName:this.state.newUser.displayName,email:this.state.newUser.email,role:this.state.newUser.role,settings:this.state.newUser.settings},!this.state.newUser.photoFileToUpload){e.next=15;break}return a=Object(N.a)(),e.next=9,this.props.uploadProfilePicture(a,this.state.newUser.photoFileToUpload);case 9:if(n=e.sent,!(s=n.snapshot)){e.next=15;break}return e.next=14,s.metadata.ref.getDownloadURL();case 14:t.photoURL=e.sent;case 15:this.props.createUserFull(t.email,t.displayName,t.photoURL||"",t.role,t.settings);case 16:this.props.closeModal();case 17:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleUserChange",value:function(e){this.setState({newUser:Object(n.a)({},e)})}},{key:"disableConfirmButton",value:function(){return!this.state.newUser||!this.state.newUser.displayName||!this.state.newUser.email||!this.state.newUser.role||!this.state.newUser.settings}},{key:"render",value:function(){var e=this.props,t=e.user,a=e.dbUser,n=e.params,s=e.closeModal;return m.a.createElement("div",{className:"user"},m.a.createElement(b.a,{title:"Add/edit user",onClose:s}),m.a.createElement("div",{className:"user-modal-body"},m.a.createElement(y,{onChange:this.handleUserChange,currentUser:t,currentDbUser:a,user:n.user})),m.a.createElement(g.a,{onCancel:s,onConfirm:this.handleConfirm,disableConfirmButton:this.disableConfirmButton()}))}}]),t}(m.a.Component));var A={closeModal:C.a,createUserFull:function(e,t,a,n,s){return function(){var o=Object(i.a)(r.a.mark(function i(o){var l,h;return r.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o(O.b(t,e,a));case 2:return l=r.sent,h=l.user,r.abrupt("return",o(O.a(h.uid,n,s)));case 5:case"end":return r.stop()}},i)}));return function(e){return o.apply(this,arguments)}}()},uploadProfilePicture:k.e};t.default=Object(f.b)(function(e){var t=e.app;return{user:t.user,dbUser:t.dbUser}},A)(j)},311:function(e,t,a){},319:function(e,t,a){},320:function(e,t,a){},321:function(e,t,a){"use strict";var n=a(0),s=a.n(n),r="Cancel",i="Save",o={center:"center",left:"left",right:"right"};a(320);function l(e){var t=e.onCancel,a=e.onConfirm,n=e.cancelCaption,l=void 0===n?r:n,h=e.confirmCaption,c=void 0===h?i:h,u=e.disableConfirmButton,d=void 0!==u&&u,p=e.contentAlignment,m=void 0===p?o.right:p;return s.a.createElement("footer",{className:"modal-footer ".concat(m)},s.a.createElement("button",{className:"cancel",onClick:t}," ",l),s.a.createElement("button",{className:"confirm",onClick:a,disabled:d},c))}l.defaultProps={contentAlignment:o.right},a.d(t,"a",function(){return l})},322:function(e,t,a){"use strict";var n=a(0),s=a.n(n),r=a(36),i=a(31),o=a(45);a(319);function l(e){var t=e.title,a=e.onClose;return s.a.createElement("header",{className:"modal-header"},s.a.createElement("h2",{className:"title"},t),a&&s.a.createElement(r.a,{className:"close-button",icon:"times",onClick:a}))}o.b.add(i.g),a.d(t,"a",function(){return l})},323:function(e,t,a){}}]);
//# sourceMappingURL=0.a3fddf37.chunk.js.map